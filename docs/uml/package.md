---
title: 包图 Package
sidebar: 'auto'
date: 2020-07-20
tags:
 - 绘图指南

categories:
 - 实用技能
---

> 使用快捷键 Ctrl+D 或 Command+D 可快速收藏本技术专栏 收获爬虫架构/爬虫逆向/存储引擎/消息队列/Python/Golang相关知识



只要你有开发经验，那么理解包 Package 就很容易了。包其实就是用来给功能模块进行分组的，在 Golang 中，一个文件目录就是一个包，目录下的所有 .go 文件都属于这个包。

```python
├── CHANGELOG.md        # 更新日志
├── README.md           # 说明文档
├── go.mod              # 依赖管理
├── go.sum              # 依赖管理
├── main.go             # 入口文件
├── pkg                 # 项目主目录
│   ├── accesses        # 数据访问层
│   ├── commons         # 公用组件
│   ├── controlls       # 控制层
│   ├── errs            # 错误定义
│   ├── handlers        # 视图层
│   ├── middlewares     # 中间件层
├── server              # 服务组件
│   ├── router.go
│   └── server.go
├── static              # 静态文件
└── utils               # 工具组件
```

以上方列出的 Golang 项目目录组织结构为例，pkg、server、static 、handlers 和 utils 目录对应的就是 UML 中所说的包，router.go 和 server.go 可以称为模块或者组件。

## 包的表示

当然，包不仅仅指物理的工程目录结构，代码结构关系也可以用包表示。假设 server.go 文件里面有 run 函数、config 函数和，那么 server 就可以看作一个包，run 函数和 config 函数就可以看作是模块或者组件，具体表示如下。

![image-20200720153133921](https://img.weishidong.com/image-20200720153133921.png)

再往更小的单元看，假设有一个名为 CarSystem 的类，类里面包含 music 函数、air-conditioning 函数和 lighting 函数，那么 CarSystem 就可以看作一个包，里面的几个函数就可以看作是模块或者组件，具体表示如下。

![image-20200720153049761](https://img.weishidong.com/image-20200720153049761.png)

往大了说，包是顶层的目录，而模块或组件就是里面的文件。往小了说，包就是一个类，里面的函数、变量等就是包的组件。看明白了吗？



## 包与包之间的关系

模块与模块之间会有关联关系，类与类之间也有关联关系。以面向对象编程汇总的类为例，继承就是类之间关系的一种。包不仅仅用来表示类，所以包之间的关系不能直接用类之间的关系，而是有自己的关系描述。

### 泛化、依赖与细化

包的关系主要有泛化、依赖和细化。前面的文章中我们已经了解过泛化，它以空心箭头表示，细化则以虚线箭头表示。包之间的 3 种关系如下图所示。

![image-20200720153948217](https://img.weishidong.com/image-20200720153948217.png)

当一个包拥有和另一个包相同元素，但它却包含更多细节时，它们就是细化关系。以上图为例，自行车维修工具是修理工具的细化。工具和修理工具之间是泛化关系。

自行车维修工具依赖于修理工具，这一层你看懂了吗？



### 合并关系

包与包可以合并，例如修理工具包和保养工具包可以合并称为维护工具包，具体表示如下。

![image-20200720155125875](https://img.weishidong.com/image-20200720155125875.png)

从实际业务角度来看，修理和保养都可以划分到维护业务中，所以这两个包是可以合并到一起的。包的合并关系用虚线箭头表示，箭头指向的包称为源包，无箭头的包称为合并目标。

::: tip

小知识：合并目标用空包表示，无需将源包中的模块或组件放到合并目标中。

:::



## 包中的包

在上面 Golang 项目目录中存在着包嵌套包的情况，例如 handlers 和 errs 包在 pkg 包内。用 UML 图来表示的时候，直接放置包的图形即可，具体表示如下。

![image-20200720155726081](https://img.weishidong.com/image-20200720155726081.png)

包相对于其他组件来说更上层，所以并没有复杂的关系，也不需要太多的表示符号。因此可以说包的概念并不复杂，比时序图和状态图来的更简单，你学会了吗？