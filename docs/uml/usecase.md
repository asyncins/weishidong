---
title: 用例图 UseCase
sidebar: 'auto'
date: 2020-07-21
tags:
 - 绘图指南

categories:
 - 实用技能
---

> 使用快捷键 Ctrl+D 或 Command+D 可快速收藏本技术专栏 收获爬虫架构/爬虫逆向/存储引擎/消息队列/Python/Golang相关知识



用例图常常出现在系统设计初期，尤其是在整理和收集需求时。用例图带来的好处是能够帮助我们理解系统的行为，让我们对已知的需求进行边界划分，同时还能够促进我们发现新的需求。



## 用例是什么？

用例的英文写法是 UseCase，它是一种从上帝视角看待问题的方法，以用户的观点对系统行为进行描述。在实际开发中，我们常常通过用例图来帮助我们发现系统需求。换一个角度来看，系统需求的收集整理过程其实就是将多个用例组合到一起。用例图的构成比较简单，它有人形参与者、椭圆形用例和将它们连接起来的关联线组成。下图是一个简单的用例图。

![JfvdZk](https://img.weishidong.com/JfvdZk.png)



参与者和关联线都很好理解，那用例是什么呢？

用例可以理解为我们要达到的目的或者想要实现的功能，例如下图洗衣机系统的用例图中，用例是洗衣服和甩干衣服。

![oQNESB](https://img.weishidong.com/oQNESB.png)

我们再来看另外一个例子，体检预约系统。如果要想要去办理入职体检，那我们是不是需要预约呢？那么一开始，这个预约系统的用例图如下图所示。

![image-20200718203548633](https://img.weishidong.com/image-20200718203548633.png)

接着我们继续思考，看看还有什么可能发生的：

允不允许现场办理呢？

临时有事是不是可以取消预约呢？

预约的时候是不是要缴费呢？

取消预约是不是得退款呢？

预约成功后是不是要生成预约单呢？

这些事务一般由医生来处理还是护士来处理呢？其实可以不用人来处理，由程序负责。但这里假设由护士负责处理这些事务，那么将预约系统的用例图改为下面这样。

![n6e92W](https://img.weishidong.com/n6e92W.png)

## 用例之间的关系

通过上面几个简单的用例示例，想必现在你已经知道了什么是用例，也学会了绘制用例图。但是实际工作中你会发现用例也不是那么简单的，它也有复杂的时候。

### 包含关系

例如上面的体检预约系统，预约这个用例应该将生成预约单和查看预约单包含在内，缴费和退费应该包含在支付用例中。在用例图中，我们通过箭头指向和构造型来表示用例之间的包含关系。新的体检预约系统用例图如下所示。

![image-20200718204750573](https://img.weishidong.com/image-20200718204750573.png)

用例图中的**双尖括号**和里面的**关键字**组合到一起就叫做**构造型**，这样就清晰地描述了用例之间的包含关系。



### 扩展关系

用例图里的扩展和我们在生活中了解的扩展不太一样，其实用分支或依赖来描述可能会更贴切一些。在用例图中，使用一个新的用例来增强原来的用例就叫做扩展，扩展的关键词是 extend。要注意的是，扩展只能够发生在原用例的序列中的某个点，这个点叫做扩展点，说起来是真绕，我们还是用图来说明吧。下图是为生成预约单用例和查看预约单用例增加扩展后的体检预约系统用例图。

![VApWvD](https://img.weishidong.com/VApWvD.png)

在预约成功且生成预约单之后，系统就要给护士发出预约提醒。参与者或者护士查看预约单时，参与者可以根据自身时间安排选择是否取消预约，护士也可以根据当前预约人数或者医生的安排取消预约。也就是说，在预约单生成前十不会发出预约提醒的，要想取消预约就得进入到预约单查看页面。在这个场景下，预约提醒是生成预约单的扩展，扩展点是生成预约单。取消预约时查看预约单的扩展，扩展点是查看预约单。

如果你还是不太清楚扩展和扩展点，那我们换个饮料售卖机系统的用例图来理解。当售卖机饮料不足时会提醒管理员添加饮料，那到底添加什么饮料呢？一种是根据缺货的情况添加，一种是根据售卖情况添加（卖得更好的饮料应该多补充一些），扩展关系如下图所示。

![IwoKah](https://img.weishidong.com/IwoKah.png)

这时候，根据售卖情况补货就是补货的扩展，扩展点是补充饮料。现在你再看，是不是觉得分支和依赖比扩展听起来更贴切？扩展关系中箭头的方向和包含关系中箭头的方向是相反的，因为扩展中的新用例依赖于原用例，或者说新用例是原用例的分支，所以箭头由新用例指向原用例，并加上关键字为 extend 的构造型用以说明。



### 泛化关系

泛化就像是面向对象的对象或者说编程中的类，例如猫和狗都是动物、校长和老师都是教职人员。下图描述了用例之间的泛化关系。

![bSlYoO](https://img.weishidong.com/bSlYoO.png)

这里的猫用例和狗用例称作动物的子用例，动物用例称作猫用例和狗用例的父用例。泛化关系用**空心实线箭头**来表示，由子用例指向父用例。除了用例之外，参与者也存在泛化关系，例如下图老师、校长和教职人员之间的关系。

![image-20200718233254770](https://img.weishidong.com/image-20200718233254770.png)

如果你有编程经验，那么泛化关系对你来说一定很容易理解，这里就不再举更多不同的例子了，让我们进入下一个知识点。



### 分组关系

在一个复杂的系统当中，用例的数量会非常多，这时候要像组织功能模块一样将相关联或者应当放在一起的用例组合起来。也就是说在一个大的系统用例图会出现多个小的模块用例图。下图是以手机的摄像系统为目标设计的用例图。

![SSBxfm](https://img.weishidong.com/SSBxfm.png)

可以看到，除了多个用例外它们还被分成了多组，例如自动对焦、HDR、网格和变焦划分到了辅助模块，风格化和添加文字划分到了图像编辑模块。这里我们以矩形来表示分组，当然也可以用包的图标来表示分组，即多个用例划分到一个包当中。

