---
title: 类图 Class
date: 2020-07-20
tags:
 - 类图
 - UML
sidebar: 'auto'
categories:
 - 实用技能
---

类图是我们使用 UML 时用得相当多的一种图，如果你有编程经验，那类图就太容易看懂了。类图中的类对象用矩形表示，类对象之间的关系可以用实心箭头、虚线箭头、空心箭头等图形表示。

```python
class Solution:

    def __init__(self):
        self.traverse = []
        self.left, self.right = None, None

    def prevorder(self, root):
        if root:
            self.traverse.append(root)
            self.prevorder(root.left)
            self.prevorder(root.right)
    
```

以上方的 Python 代码为例，对应的类图如下。

![image-20200720161655432](https://img.weishidong.com/image-20200720161655432.png)

在 UML 中，类可称为类对象。类中的函数需要加括号表明，变量不需要特殊表示，函数和变量用实心直线分隔。如果追求更细致的表达，例如变量的名称和默认值可以写为：

```python
brandName: String = "NightTeam"
Name: String
```

当然也可以根据语言的不同做适当的调整，例如 Rust 中表达指定路径的类时可以用 `ProjectPath::ClassName` 表示。

还可以为对象增加一些约束，例如限制传入参数 capacity 的上限为 100，下限为 50，具体表示如下。

![image-20200720165759848](https://img.weishidong.com/image-20200720165759848.png)

花括号中间的就是类对象的约束说明，方在哪个位置并没有明确规定，你可以放在类的左侧或者右侧，上方或者下方。

有时候你可能想为某个函数或者变量添加注释，这时候可以用一个像文件的图标来表示，将注释内容写在文件上即可，类对象与注释之间用虚线连接即可，具体表示如下。

![image-20200720170046207](https://img.weishidong.com/image-20200720170046207.png)





## 类对象之间的关系

在 UML 中，类对象通常有泛化关系、依赖关系和关联关系这 3 种。下面我们一起来看看在 UML 中如何表示类对象的这 3 种关系。

### 类的继承和图的泛化

实际上我们编程过程中所说的类的继承关系在 UML 图中就是泛化关系。泛化关系用空心实线箭头表示，箭头指向的是父类，具体表示如下。

![image-20200720162544623](https://img.weishidong.com/image-20200720162544623.png)

要注意的是，在一些编程语言（例如 Python）中，一个类可以有多个父类。就像上图的狮虎兽，它继承了狮子和老虎的基因🧬。



### 类的调用和依赖

在一个类当中调用另一个类，那么它们的关系就是依赖关系，具体表示如下。

![image-20200720163103690](https://img.weishidong.com/image-20200720163103690.png)

在名为 Move 的类当中实例化了名为 Run 的类，实例名为 run。这时候 Move 和 Run 就建立了依赖关系，Move 依赖于 Run。

::: tip

为了便于读者理解，补充一些说明。Move 代表移动，Run 代表跑。移动的方式除了跑之外还有走、跳、爬、滚等，所以示例中用 Move 依赖于 Run。跑又分为快跑和慢跑，所以 Run 对象里面包含 fast 函数和 slow 函数。

:::



### 类对象的关联

在 UML 图中，类对象与类对象之间除了泛化和依赖之外还有关联关系。这里的关联可以是泛化也可以是依赖，也可以两者都不是。它仅仅只表示类对象之间有联系，可以不用指明具体联系，因此是一种灵活的表达方式。

举个例子，在英雄联盟职业联赛当中，职业选手和公司是契约关系，公司可以根据发展规划选择让选手上场比赛或者交易到其他队伍。这种契约关系和泛化、依赖都不相关，在 UML 中可以用直线表示关联，用构造型说明，具体表示如下。

![image-20200720164043255](https://img.weishidong.com/image-20200720164043255.png)

如果公司之间产生与职业选手人员交换相关的交易，那就会有人进入到公司中，为公司下属的队伍效力。这样的关系叫做链，这是一个有指向性的关系，选手效力于队伍，所以可以用箭头来表示指向。但 UML 中约定用三角符号表示，具体如下图所示。

![image-20200720164429449](https://img.weishidong.com/image-20200720164429449.png)

其实你用箭头来表示也是可以的。



### 关联上的约束

有些场景下，两个对象建立关联后需要一个规则来维持关系，这时候可以通过在关联线附近添加一个约束来说明。例如去医院看病时，医生为病患问诊，但问诊服务需要按照病患预约排队次序进行，具体表示如下。

![image-20200720164759129](https://img.weishidong.com/image-20200720164759129.png)

